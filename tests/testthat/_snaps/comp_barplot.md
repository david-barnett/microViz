# comp_barplot doesn't change

    Code
      levels(p$data$top)
    Output
      [1] "other"                               
      [2] "Allistipes et rel."                  
      [3] "Clostridium symbiosum et rel."       
      [4] "Clostridium cellulosi et rel."       
      [5] "Faecalibacterium prausnitzii et rel."
      [6] "Prevotella oralis et rel."           
      [7] "Oscillospira guillermondii et rel."  
      [8] "Bacteroides vulgatus et rel."        
      [9] "Prevotella melaninogenica et rel."   

# list of plots generated by group_by works

    Code
      print(p)
    Output
      [1] "overweight"
    Code
      levels(plots[[p]]$data$top)
    Output
      [1] "other"                               
      [2] "Allistipes et rel."                  
      [3] "Clostridium symbiosum et rel."       
      [4] "Clostridium cellulosi et rel."       
      [5] "Faecalibacterium prausnitzii et rel."
      [6] "Prevotella oralis et rel."           
      [7] "Oscillospira guillermondii et rel."  
      [8] "Bacteroides vulgatus et rel."        
      [9] "Prevotella melaninogenica et rel."   

---

    Code
      print(p)
    Output
      [1] "lean"
    Code
      levels(plots[[p]]$data$top)
    Output
      [1] "other"                               
      [2] "Allistipes et rel."                  
      [3] "Clostridium symbiosum et rel."       
      [4] "Clostridium cellulosi et rel."       
      [5] "Faecalibacterium prausnitzii et rel."
      [6] "Prevotella oralis et rel."           
      [7] "Oscillospira guillermondii et rel."  
      [8] "Bacteroides vulgatus et rel."        
      [9] "Prevotella melaninogenica et rel."   

---

    Code
      print(p)
    Output
      [1] "obese"
    Code
      levels(plots[[p]]$data$top)
    Output
      [1] "other"                               
      [2] "Allistipes et rel."                  
      [3] "Clostridium symbiosum et rel."       
      [4] "Clostridium cellulosi et rel."       
      [5] "Faecalibacterium prausnitzii et rel."
      [6] "Prevotella oralis et rel."           
      [7] "Oscillospira guillermondii et rel."  
      [8] "Bacteroides vulgatus et rel."        
      [9] "Prevotella melaninogenica et rel."   

# tt_add_topN_var helper works as expected

    Code
      print(head(x = tt, 6), width = 80)
    Output
                                   Phylum            Family           
      Actinomycetaceae             "Actinobacteria"  "Actinobacteria" 
      Aerococcus                   "Firmicutes"      "Bacilli"        
      Aeromonas                    "Proteobacteria"  "Proteobacteria" 
      Akkermansia                  "Verrucomicrobia" "Verrucomicrobia"
      Alcaligenes faecalis et rel. "Proteobacteria"  "Proteobacteria" 
      Allistipes et rel.           "Bacteroidetes"   "Bacteroidetes"  
                                   Genus                          test              
      Actinomycetaceae             "Actinomycetaceae"             "Actinomycetaceae"
      Aerococcus                   "Aerococcus"                   "Aerococcus"      
      Aeromonas                    "Aeromonas"                    "Aeromonas"       
      Akkermansia                  "Akkermansia"                  "Akkermansia"     
      Alcaligenes faecalis et rel. "Alcaligenes faecalis et rel." "things"          
      Allistipes et rel.           "Allistipes et rel."           "things"          
      attr(,"class")
      [1] "taxonomyTable"
      attr(,"class")attr(,"package")
      [1] "phyloseq"

