<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Aggregate taxa and create ps_extra — tax_agg • microViz</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Aggregate taxa and create ps_extra — tax_agg" />
<meta property="og:description" content="tax_agg sums the abundances of the phyloseq taxa at the given rank.
It records the tax_agg rank argument in the info of the ps_extra object output.
This ps_extra object tracks aggregation, and any further transformations and scaling,
to help you keep track of what you have done with your phyloseq object and automatically caption ordination plots.
Instead of tax_agg, consider using tax_transform() with a rank argument instead, to both aggregate and transform the taxa.
This is also useful when you want to aggregate but not transform the taxa,
and yet still log the &quot;identity&quot; transformation in ps_extra for captioning your ordination plots.
e.g. tax_transform(rank = &quot;Genus&quot;, trans = &quot;identity&quot;)
tax_agg allows you to pass NA or &quot;unique&quot; to the rank argument which will NOT aggregate the taxa.
If you use rank = &quot;unique&quot; or add_unique = TRUE, it will add a new rank called unique, identical to the taxa_names (after any aggregation)
Be aware: you should not use the top_N argument yourself without good reason.
top_N provides a feature inspired by the deprecated microbiome function aggregate_top_taxa
which is primarily useful for decluttering compositional barplots.
microViz comp_barplot (and ord_plot_iris) already run tax_agg with a top_N argument for you, so you should not.
The tax_table produced when using top_N is otherwise INVALID FOR MOST OTHER ANALYSES." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">microViz</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.10.9016</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="divider"></li>
    <li class="dropdown-header">Tutorials</li>
    <li>
      <a href="../articles/web-only/phyloseq.html">Working with phyloseq objects</a>
    </li>
    <li>
      <a href="../articles/web-only/tax-fixing.html">Fixing your tax_table</a>
    </li>
    <li>
      <a href="../articles/web-only/ordination.html">Ordination plots</a>
    </li>
    <li>
      <a href="../articles/web-only/ordination-interactive.html">Interactive Ordination Plot</a>
    </li>
    <li>
      <a href="../articles/web-only/compositions.html">Visualising compositions</a>
    </li>
    <li>
      <a href="../articles/web-only/videos.html">Videos</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/david-barnett/microViz/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Aggregate taxa and create ps_extra</h1>
    <small class="dont-index">Source: <a href='https://github.com/david-barnett/microViz/blob/master/R/tax_agg.R'><code>R/tax_agg.R</code></a></small>
    <div class="hidden name"><code>tax_agg.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>tax_agg</code> sums the abundances of the phyloseq taxa at the given rank.
It records the tax_agg rank argument in the info of the ps_extra object output.
This ps_extra object tracks aggregation, and any further transformations and scaling,
to help you keep track of what you have done with your phyloseq object and automatically caption ordination plots.</p>
<p>Instead of tax_agg, consider using <code><a href='tax_transform.html'>tax_transform()</a></code> with a rank argument instead, to both aggregate and transform the taxa.
This is also useful when you want to aggregate but not transform the taxa,
and yet still log the "identity" transformation in ps_extra for captioning your ordination plots.
e.g. <code><a href='tax_transform.html'>tax_transform(rank = "Genus", trans = "identity")</a></code></p>
<p>tax_agg allows you to pass NA or "unique" to the rank argument which will NOT aggregate the taxa.
If you use rank = "unique" or add_unique = TRUE, it will add a new rank called unique, identical to the taxa_names (after any aggregation)</p>
<p>Be aware: you should not use the top_N argument yourself without good reason.
top_N provides a feature inspired by the deprecated microbiome function aggregate_top_taxa
which is primarily useful for decluttering compositional barplots.
microViz comp_barplot (and ord_plot_iris) already run tax_agg with a top_N argument for you, so you should not.
The tax_table produced when using top_N is otherwise INVALID FOR MOST OTHER ANALYSES.</p>
    </div>

    <pre class="usage"><span class='fu'>tax_agg</span><span class='op'>(</span>
  <span class='va'>ps</span>,
  rank <span class='op'>=</span> <span class='cn'>NA</span>,
  sort_by <span class='op'>=</span> <span class='cn'>NA</span>,
  top_N <span class='op'>=</span> <span class='cn'>NA</span>,
  force <span class='op'>=</span> <span class='cn'>FALSE</span>,
  add_unique <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>ps</th>
      <td><p>phyloseq object</p></td>
    </tr>
    <tr>
      <th>rank</th>
      <td><p>NA (for tax_names level) or name of valid taxonomic rank (try phyloseq::rank_names(ps)) or "unique"</p></td>
    </tr>
    <tr>
      <th>sort_by</th>
      <td><p>if not NA, how should the taxa be sorted, uses tax_sort(), takes same options as <code>by</code> arg</p></td>
    </tr>
    <tr>
      <th>top_N</th>
      <td><p>NA does nothing, but if top_N is a number, it creates an extra tax_table column called top,
which is the same as the unique column for the first top_N number of taxa, and "other" otherwise.</p></td>
    </tr>
    <tr>
      <th>force</th>
      <td><p>If TRUE, this forces aggregation at chosen rank to occur regardless of if the output will be sensible!
This avoids the "Taxa not unique at rank: ..." error, but may allow very inappropriate aggregation to occur.
Do not use force = TRUE unless you know why you are doing this, and what the result will be.
If you are getting an error with force = FALSE, it is almost certainly better to examine the tax_table and fix the problem.
force = TRUE is similar to microbiome::aggregate_taxa,
which also does not check that the taxa are uniquely defined by only the aggregation level.</p></td>
    </tr>
    <tr>
      <th>add_unique</th>
      <td><p>if TRUE, adds a rank named unique, identical to the rownames after aggregation</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>ps_extra list object including phyloseq and tax_agg rank info</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function is inspired by <code><a href='https://rdrr.io/pkg/microbiome/man/aggregate_taxa.html'>microbiome::aggregate_taxa</a></code>.
However if <code><a href='https://rdrr.io/pkg/microbiome/man/aggregate_taxa.html'>microbiome::aggregate_taxa</a></code> is used, microViz cannot track this aggregation.</p>
<p>Comparing aggregate_taxa and tax_agg:</p>
<p>Except for the ordering of taxa, and the addition of a "unique" rank being optional,
the resulting phyloseq objects are identical for aggregating a phyloseq with no ambiguous taxa.
Taxa are ambiguous when the tax_table converges at a lower rank after branching,
such as if two different genera share the same species (e.g. "s__").
<code><a href='https://rdrr.io/pkg/microbiome/man/aggregate_taxa.html'>microbiome::aggregate_taxa</a></code> handles ambiguous taxa by creating a "unique" rank with all
of the taxonomic rank info pasted together into one, often very long, name.
<code>tax_agg</code> throws an error, and directs the user to <code><a href='tax_fix.html'>tax_fix()</a></code> to fix the ambiguous taxa before aggregation,
which should then result in (much) shorter unique names at the aggregation rank.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='tax_fix.html'>tax_fix</a></code></p>
<p><code><a href='tax_fix_interactive.html'>tax_fix_interactive</a></code></p>
<p><code><a href='tax_transform.html'>tax_transform</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://microbiome.github.io/microbiome'>microbiome</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"dietswap"</span>, package <span class='op'>=</span> <span class='st'>"microbiome"</span><span class='op'>)</span>

<span class='fu'>tax_agg</span><span class='op'>(</span>ps <span class='op'>=</span> <span class='va'>dietswap</span>, <span class='st'>"Phylum"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='ps_extra-accessors.html'>ps_get</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/phyloseq/man/tax_table-methods.html'>tax_table</a></span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Taxonomy Table:     [8 taxa by 1 taxonomic ranks]:
#&gt;                 Phylum           
#&gt; Actinobacteria  "Actinobacteria" 
#&gt; Firmicutes      "Firmicutes"     
#&gt; Proteobacteria  "Proteobacteria" 
#&gt; Verrucomicrobia "Verrucomicrobia"
#&gt; Bacteroidetes   "Bacteroidetes"  
#&gt; Spirochaetes    "Spirochaetes"   
#&gt; Fusobacteria    "Fusobacteria"   
#&gt; Cyanobacteria   "Cyanobacteria"  </div><div class='input'><span class='fu'>tax_agg</span><span class='op'>(</span>ps <span class='op'>=</span> <span class='va'>dietswap</span>, <span class='st'>"Family"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='ps_extra-accessors.html'>ps_get</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/phyloseq/man/tax_table-methods.html'>tax_table</a></span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Taxonomy Table:     [22 taxa by 2 taxonomic ranks]:
#&gt;                           Phylum            Family                     
#&gt; Actinobacteria            "Actinobacteria"  "Actinobacteria"           
#&gt; Bacilli                   "Firmicutes"      "Bacilli"                  
#&gt; Proteobacteria            "Proteobacteria"  "Proteobacteria"           
#&gt; Verrucomicrobia           "Verrucomicrobia" "Verrucomicrobia"          
#&gt; Bacteroidetes             "Bacteroidetes"   "Bacteroidetes"            
#&gt; Clostridium cluster XV    "Firmicutes"      "Clostridium cluster XV"   
#&gt; Clostridium cluster XIVa  "Firmicutes"      "Clostridium cluster XIVa" 
#&gt; Clostridium cluster IV    "Firmicutes"      "Clostridium cluster IV"   
#&gt; Clostridium cluster XI    "Firmicutes"      "Clostridium cluster XI"   
#&gt; Asteroleplasma            "Firmicutes"      "Asteroleplasma"           
#&gt; Spirochaetes              "Spirochaetes"    "Spirochaetes"             
#&gt; Clostridium cluster XVI   "Firmicutes"      "Clostridium cluster XVI"  
#&gt; Clostridium cluster XVII  "Firmicutes"      "Clostridium cluster XVII" 
#&gt; Clostridium cluster I     "Firmicutes"      "Clostridium cluster I"    
#&gt; Clostridium cluster XVIII "Firmicutes"      "Clostridium cluster XVIII"
#&gt; Clostridium cluster III   "Firmicutes"      "Clostridium cluster III"  
#&gt; Clostridium cluster IX    "Firmicutes"      "Clostridium cluster IX"   
#&gt; Fusobacteria              "Fusobacteria"    "Fusobacteria"             
#&gt; Clostridium cluster XIII  "Firmicutes"      "Clostridium cluster XIII" 
#&gt; Cyanobacteria             "Cyanobacteria"   "Cyanobacteria"            
#&gt; Uncultured Clostridiales  "Firmicutes"      "Uncultured Clostridiales" 
#&gt; Uncultured Mollicutes     "Firmicutes"      "Uncultured Mollicutes"    </div><div class='input'>
<span class='co'># create some missing values</span>
<span class='fu'><a href='https://rdrr.io/pkg/phyloseq/man/tax_table-methods.html'>tax_table</a></span><span class='op'>(</span><span class='va'>dietswap</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>3</span><span class='op'>:</span><span class='fl'>7</span>, <span class='st'>"Genus"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"g__"</span>

<span class='co'># this will produce an error, instructing the user to use tax_fix</span>
<span class='co'># tax_agg(ps = dietswap, "Genus")</span>

<span class='co'># this will then work:</span>
<span class='va'>dietswap</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='tax_fix.html'>tax_fix</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>tax_agg</span><span class='op'>(</span><span class='st'>"Genus"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; ps_extra object - a list with phyloseq and extras:
#&gt; 
#&gt; phyloseq-class experiment-level object
#&gt; otu_table()   OTU Table:         [ 128 taxa and 222 samples ]
#&gt; sample_data() Sample Data:       [ 222 samples by 8 sample variables ]
#&gt; tax_table()   Taxonomy Table:    [ 128 taxa by 3 taxonomic ranks ]
#&gt; 
#&gt; ps_extra info:
#&gt; tax_agg = Genus tax_transform = NA</div><div class='input'>
<span class='co'># you can replace unknown values with `tax_fix()`</span>
<span class='co'># which will fix most problems, like the common "g__" and "s__"</span>
<span class='co'># but default tax_fix settings won't catch this long unknown</span>
<span class='fu'><a href='https://rdrr.io/pkg/phyloseq/man/tax_table-methods.html'>tax_table</a></span><span class='op'>(</span><span class='va'>dietswap</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>13</span><span class='op'>:</span><span class='fl'>17</span>, <span class='st'>"Family"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='st'>"some_unknown_family"</span>
<span class='va'>dietswap</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='tax_fix.html'>tax_fix</a></span><span class='op'>(</span>unknowns <span class='op'>=</span> <span class='st'>"some_unknown_family"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>tax_agg</span><span class='op'>(</span><span class='st'>"Family"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; ps_extra object - a list with phyloseq and extras:
#&gt; 
#&gt; phyloseq-class experiment-level object
#&gt; otu_table()   OTU Table:         [ 25 taxa and 222 samples ]
#&gt; sample_data() Sample Data:       [ 222 samples by 8 sample variables ]
#&gt; tax_table()   Taxonomy Table:    [ 25 taxa by 2 taxonomic ranks ]
#&gt; 
#&gt; ps_extra info:
#&gt; tax_agg = Family tax_transform = NA</div><div class='input'>
<span class='co'># try tax_fix_interactive() to help you find and fix all the uninformative</span>
<span class='co'># and converging values in your taxonomy table.</span>

<span class='co'># the code below won't aggregate taxa,</span>
<span class='co'># but just adds a new rank called unique, equal to taxa_names</span>
<span class='fu'>tax_agg</span><span class='op'>(</span>ps <span class='op'>=</span> <span class='va'>dietswap</span>, rank <span class='op'>=</span> <span class='cn'>NA</span>, add_unique <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='output co'>#&gt; ps_extra object - a list with phyloseq and extras:
#&gt; 
#&gt; phyloseq-class experiment-level object
#&gt; otu_table()   OTU Table:         [ 130 taxa and 222 samples ]
#&gt; sample_data() Sample Data:       [ 222 samples by 8 sample variables ]
#&gt; tax_table()   Taxonomy Table:    [ 130 taxa by 4 taxonomic ranks ]
#&gt; 
#&gt; ps_extra info:
#&gt; tax_agg = unique tax_transform = NA</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span><span class='op'>(</span><span class='fu'>tax_agg</span><span class='op'>(</span><span class='va'>dietswap</span>, <span class='cn'>NA</span>, add_unique <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>, <span class='fu'>tax_agg</span><span class='op'>(</span><span class='va'>dietswap</span>, <span class='st'>"unique"</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># TRUE</span>
</div><div class='output co'>#&gt; [1] TRUE</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Barnett.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '22e6f0a75b7b1ffae9bf5bc5b58864d7',
    indexName: 'microViz',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


